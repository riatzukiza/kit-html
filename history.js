
(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)


(function(a, b, c) {
  /* ../../shell-utils/electron-kit/node_modules/kit/inc/core/defs.sibilant:53:9 */

  return foo(this);
}).bind(this);





;
var R = require("ramda");
var { 
  create,
  extend,
  mixin,
  conditional,
  cond,
  partiallyApplyAfter
 } = require("kit/js/util");
var { 
  Interface
 } = require("kit-interface");


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)


(function(a, b, c) {
  /* ../../shell-utils/electron-kit/node_modules/kit/inc/core/defs.sibilant:53:9 */

  return foo(this);
}).bind(this);





;
var R = require("ramda");
var { 
  create,
  extend,
  mixin,
  conditional,
  cond,
  partiallyApplyAfter
 } = require("kit/js/util");
var { 
  Interface
 } = require("kit-interface");



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)


(function(a, b, c) {
  /* ../../shell-utils/electron-kit/node_modules/kit/inc/core/defs.sibilant:53:9 */

  return foo(this);
}).bind(this);





;
var R = require("ramda");
var { 
  create,
  extend,
  mixin,
  conditional,
  cond,
  partiallyApplyAfter
 } = require("kit/js/util");
var { 
  Interface
 } = require("kit-interface");


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)





var renderChildren = R.curry(((_parent, c, i, a) => {
	
  return (function() {
    if (typeof c === "undefined") {
      return null;
    } else if (c.render) {
      return c.render(_parent);
    } else if ((c && "object" === typeof c && "Array" === c.constructor.name)) {
      return c.each(renderChildren(_parent));
    } else if (typeof c === "string") {
      return _parent._node.appendChild(document.createTextNode(c));
    } else if (typeof c === "number") {
      return _parent._node.appendChild(document.createTextNode(("" + c)));
    } else if (typeof c === "function") {
      return renderChildren(_parent, c(_parent), i, a);
    } else if ((c instanceof Element)) {
      return (function(node) {
        /* ../../shell-utils/electron-kit/node_modules/kit/inc/scope.sibilant:12:9 */
      
        a[i] = node;
        return renderChildren(_parent, node, i, a);
      })(DocumentNode.wrap(c, _parent._node));
    } else {
      return _parent._node.appendChild(c);
    }
  }).call(this);

}));
var DocumentNode = EventEmitter.define("DocumentNode", { 
  init( tagName = this.tagName,attributes = this.attributes,_children = [],_parent = this._parent,_node = document.createElement(tagName) ){ 
    
      this.tagName = tagName;this.attributes = attributes;this._children = _children;this._parent = _parent;this._node = _node;
      EventEmitter.init.call(this);
      return this;
    
   },
  get children(  ){ 
    
      return this._children;
    
   },
  get style(  ){ 
    
      return this._node.style;
    
   },
  clear( _node = this._node ){ 
    
      _node.innerHTML = "";
      return this;
    
   },
  render( _parent = this._parent,attributes = this.attributes,tagName = this.tagName,_node = this._node,children = this.children ){ 
    
      _node.innerHTML = "";
      this._parent = _parent;
      _parent._node.appendChild(_node);
      attributes.each(((a, k) => {
      	
        return _node[k] = a;
      
      }));
      children.each(renderChildren(this));
      this.emit("render");
      return this;
    
   },
  wrap( _node,_parent ){ 
    
      "create a Document-node from a native DOM Element";
      return create(DocumentNode)(_node.tagName, {  }, [], _parent, _node);
    
   },
  append( node = this.node,children = this.children ){ 
    
      "add a child to the bottom of this one";
      children.push(node);
      return this;
    
   },
  prepend( node = this.node,children = this.children ){ 
    
      "add a child to the top of this one";
      return this.children = [ node, children ];
    
   },
  remove( _node = this._node,_parent = this._parent ){ 
    
      "remove this element from the tree.";
      _node.remove();
      _parent.children.filter(((c) => {
      	
        return !(_node === c);
      
      }));
      _parent.emit("remove", _node);
      return this;
    
   }
 });
var DocumentRoot = DocumentNode.define("DocumentRoot", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"html",
  _node:document.documentElement,
  _children:[]
 });
var DocumentBody = DocumentNode.define("DocumentBody", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"body",
  _node:document.body,
  _children:[]
 });
var DocumentHead = DocumentNode.define("DocumentHead", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"head",
  _node:document.head,
  _children:[]
 });
var createDocumentNode = create(DocumentNode);
console.log(document.appendChild)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var { 
  EventEmitter,
  emit,
  bubble
 } = require("kit-events");


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var DocumentNode = EventEmitter.define("DocumentNode", { 
  init( tagName = this.tagName,attributes = this.attributes,_children = [],_parent = this._parent,_node = document.createElement(tagName) ){ 
    
      this.tagName = tagName;this.attributes = attributes;this._children = _children;this._parent = _parent;this._node = _node;
      EventEmitter.init.call(this);
      return this;
    
   },
  get children(  ){ 
    
      return this._children;
    
   },
  get style(  ){ 
    
      return this._node.style;
    
   },
  clear( _node = this._node ){ 
    
      _node.innerHTML = "";
      return this;
    
   },
  render( _parent = this._parent,attributes = this.attributes,tagName = this.tagName,_node = this._node,children = this.children ){ 
    
      _node.innerHTML = "";
      this._parent = _parent;
      _parent._node.appendChild(_node);
      attributes.each(((a, k) => {
      	
        return _node[k] = a;
      
      }));
      children.each(renderChildren(this));
      this.emit("render");
      return this;
    
   },
  wrap( _node,_parent ){ 
    
      "create a Document-node from a native DOM Element";
      return create(DocumentNode)(_node.tagName, {  }, [], _parent, _node);
    
   },
  append( node = this.node,children = this.children ){ 
    
      "add a child to the bottom of this one";
      children.push(node);
      return this;
    
   },
  prepend( node = this.node,children = this.children ){ 
    
      "add a child to the top of this one";
      return this.children = [ node, children ];
    
   },
  remove( _node = this._node,_parent = this._parent ){ 
    
      "remove this element from the tree.";
      _node.remove();
      _parent.children.filter(((c) => {
      	
        return !(_node === c);
      
      }));
      _parent.emit("remove", _node);
      return this;
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var DocumentRoot = DocumentNode.define("DocumentRoot", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"html",
  _node:document.documentElement,
  _children:[]
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var DocumentBody = DocumentNode.define("DocumentBody", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"body",
  _node:document.body,
  _children:[]
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var DocumentHead = DocumentNode.define("DocumentHead", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"head",
  _node:document.head,
  _children:[]
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var createDocumentNode = create(DocumentNode);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
console.log(document.appendChild)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)



(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
createDocumentNode("div", { 'id': "main" }, [ createDocumentNode("h1", {  }, [ "hi" ]) ]).render(DocumentBody)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
Array.prototype.each = (function Array$prototype$each$(f) {
  /* Array.prototype.each ../../../apps/ants/inc/misc.sibilant:1:0 */

  this.forEach(f);
  return this;
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)


var { 
  EventEmitter,
  emit,
  bubble
 } = require("kit-events");



var renderChildren = R.curry(((_parent, c, i, a) => {
	
  return (function() {
    if (typeof c === "undefined") {
      return null;
    } else if (c.render) {
      return c.render(_parent);
    } else if ((c && "object" === typeof c && "Array" === c.constructor.name)) {
      return c.each(renderChildren(_parent));
    } else if (typeof c === "string") {
      return _parent._node.appendChild(document.createTextNode(c));
    } else if (typeof c === "number") {
      return _parent._node.appendChild(document.createTextNode(("" + c)));
    } else if (typeof c === "function") {
      return renderChildren(_parent, c(_parent), i, a);
    } else if ((c instanceof Element)) {
      return (function(node) {
        /* ../../shell-utils/electron-kit/node_modules/kit/inc/scope.sibilant:12:9 */
      
        a[i] = node;
        return renderChildren(_parent, node, i, a);
      })(DocumentNode.wrap(c, _parent._node));
    } else {
      return _parent._node.appendChild(c);
    }
  }).call(this);

}));
var DocumentNode = EventEmitter.define("DocumentNode", { 
  init( tagName = this.tagName,attributes = this.attributes,_children = [],_parent = this._parent,_node = document.createElement(tagName) ){ 
    
      this.tagName = tagName;this.attributes = attributes;this._children = _children;this._parent = _parent;this._node = _node;
      EventEmitter.init.call(this);
      return this;
    
   },
  get children(  ){ 
    
      return this._children;
    
   },
  get style(  ){ 
    
      return this._node.style;
    
   },
  clear( _node = this._node ){ 
    
      _node.innerHTML = "";
      return this;
    
   },
  render( _parent = this._parent,attributes = this.attributes,tagName = this.tagName,_node = this._node,children = this.children ){ 
    
      _node.innerHTML = "";
      this._parent = _parent;
      _parent._node.appendChild(_node);
      attributes.each(((a, k) => {
      	
        return _node[k] = a;
      
      }));
      children.each(renderChildren(this));
      this.emit("render");
      return this;
    
   },
  wrap( _node,_parent ){ 
    
      "create a Document-node from a native DOM Element";
      return create(DocumentNode)(_node.tagName, {  }, [], _parent, _node);
    
   },
  append( node = this.node,children = this.children ){ 
    
      "add a child to the bottom of this one";
      children.push(node);
      return this;
    
   },
  prepend( node = this.node,children = this.children ){ 
    
      "add a child to the top of this one";
      return this.children = [ node, children ];
    
   },
  remove( _node = this._node,_parent = this._parent ){ 
    
      "remove this element from the tree.";
      _node.remove();
      _parent.children.filter(((c) => {
      	
        return !(_node === c);
      
      }));
      _parent.emit("remove", _node);
      return this;
    
   }
 });
var DocumentRoot = DocumentNode.define("DocumentRoot", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"html",
  _node:document.documentElement,
  _children:[]
 });
var DocumentBody = DocumentNode.define("DocumentBody", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"body",
  _node:document.body,
  _children:[]
 });
var DocumentHead = DocumentNode.define("DocumentHead", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"head",
  _node:document.head,
  _children:[]
 });
var createDocumentNode = create(DocumentNode);
console.log(document.appendChild)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
createDocumentNode("div", { 'id': "main" }, [ createDocumentNode("h1", {  }, [ "hi" ]) ]).render(DocumentBody)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/kit-lang/libs/html/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)


var { 
  EventEmitter,
  emit,
  bubble
 } = require("kit-events");



var renderChildren = R.curry(((_parent, c, i, a) => {
	
  return (function() {
    if (typeof c === "undefined") {
      return null;
    } else if (c.render) {
      return c.render(_parent);
    } else if ((c && "object" === typeof c && "Array" === c.constructor.name)) {
      return c.each(renderChildren(_parent));
    } else if (typeof c === "string") {
      return _parent._node.appendChild(document.createTextNode(c));
    } else if (typeof c === "number") {
      return _parent._node.appendChild(document.createTextNode(("" + c)));
    } else if (typeof c === "function") {
      return renderChildren(_parent, c(_parent), i, a);
    } else if ((c instanceof Element)) {
      return (function(node) {
        /* ../../shell-utils/electron-kit/node_modules/kit/inc/scope.sibilant:12:9 */
      
        a[i] = node;
        return renderChildren(_parent, node, i, a);
      })(DocumentNode.wrap(c, _parent._node));
    } else {
      return _parent._node.appendChild(c);
    }
  }).call(this);

}));
var DocumentNode = EventEmitter.define("DocumentNode", { 
  init( tagName = this.tagName,attributes = this.attributes,_children = [],_parent = this._parent,_node = document.createElement(tagName) ){ 
    
      this.tagName = tagName;this.attributes = attributes;this._children = _children;this._parent = _parent;this._node = _node;
      EventEmitter.init.call(this);
      return this;
    
   },
  get children(  ){ 
    
      return this._children;
    
   },
  get style(  ){ 
    
      return this._node.style;
    
   },
  clear( _node = this._node ){ 
    
      _node.innerHTML = "";
      return this;
    
   },
  render( _parent = this._parent,attributes = this.attributes,tagName = this.tagName,_node = this._node,children = this.children ){ 
    
      _node.innerHTML = "";
      this._parent = _parent;
      _parent._node.appendChild(_node);
      attributes.each(((a, k) => {
      	
        return _node[k] = a;
      
      }));
      children.each(renderChildren(this));
      this.emit("render");
      return this;
    
   },
  wrap( _node,_parent ){ 
    
      "create a Document-node from a native DOM Element";
      return create(DocumentNode)(_node.tagName, {  }, [], _parent, _node);
    
   },
  append( node = this.node,children = this.children ){ 
    
      "add a child to the bottom of this one";
      children.push(node);
      return this;
    
   },
  prepend( node = this.node,children = this.children ){ 
    
      "add a child to the top of this one";
      return this.children = [ node, children ];
    
   },
  remove( _node = this._node,_parent = this._parent ){ 
    
      "remove this element from the tree.";
      _node.remove();
      _parent.children.filter(((c) => {
      	
        return !(_node === c);
      
      }));
      _parent.emit("remove", _node);
      return this;
    
   }
 });
var DocumentRoot = DocumentNode.define("DocumentRoot", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"html",
  _node:document.documentElement,
  _children:[]
 });
var DocumentBody = DocumentNode.define("DocumentBody", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"body",
  _node:document.body,
  _children:[]
 });
var DocumentHead = DocumentNode.define("DocumentHead", { 
  get _parent(  ){ 
    
      return this;
    
   },
  tagName:"head",
  _node:document.head,
  _children:[]
 });
var createDocumentNode = create(DocumentNode);
console.log(document.appendChild)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
Array.prototype.each = (function Array$prototype$each$(f) {
  /* Array.prototype.each ../../../apps/ants/inc/misc.sibilant:1:0 */

  this.forEach(f);
  return this;
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
createDocumentNode("div", { 'id': "main" }, [ createDocumentNode("h1", {  }, [ "hi" ]) ]).render(DocumentBody)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/inc/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
Object.prototype.each = (function Object$prototype$each$(f) {
  /* Object.prototype.each eval.sibilant:1:0 */

  return Object.keys(this).forEach(((k) => {
  	
    return f(this[k], k);
  
  }));
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
createDocumentNode("div", { 'id': "main" }, [ createDocumentNode("h1", {  }, [ "hi" ]) ]).render(DocumentBody)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
createDocumentNode("div", { 'id': "main" }, [ createDocumentNode("canvas", { 'id': "ants" }, []) ]).render(DocumentBody)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var a = dl.tensor1d([ 1, 2, 3, 4, 5 ]),
    b = dl.scalar(5);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var dl = require("deeplearn");


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var a = dl.tensor1d([ 1, 2, 3, 4, 5 ]),
    b = dl.scalar(5);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.print()


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
b.print()


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.add(b).print()


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.print()


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.data[0] = 2;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.print()

console.log(a)
console.log(a.data)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.data.then((function(b, ...others) {
  /* ../../shell-utils/electron-kit/node_modules/kit/inc/console.sibilant:10:8 */

  console.log("what do we have", b, ...others);
  return b;
}))


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.data().then((function(b, ...others) {
  /* ../../shell-utils/electron-kit/node_modules/kit/inc/console.sibilant:10:8 */

  console.log("what do we have", b, ...others);
  return b;
}))


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.data().then(((d) => {
	
  return d[0] = 5;

}))


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
a.print()


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)


(function(a, b, c) {
  /* ../../shell-utils/electron-kit/node_modules/kit/inc/core/defs.sibilant:53:9 */

  return foo(this);
}).bind(this);





;
var R = require("ramda");
var { 
  create,
  extend,
  mixin,
  conditional,
  cond,
  partiallyApplyAfter
 } = require("kit/js/util");
var { 
  Interface
 } = require("kit-interface");


Array.prototype.each = (function Array$prototype$each$(f) {
  /* Array.prototype.each ../../../apps/ants/inc/misc.sibilant:1:0 */

  this.forEach(f);
  return this;
});

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var canvas = document.getElementById("ants");

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

var dim = [ 256, 256 ];


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext(2, d),
          height = dim[0],
          width = dim[1];
      var imageData = (new ImageData(height, width));
      return dl.tidy((() => {
      	
        return tensor.data().then(((d) => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData();
        
        }));
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var rgb = (function rgb$(r, g, b) {
  /* rgb eval.sibilant:1:0 */

  return { 
    r,
    g,
    b
   };
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var red = rgb(255, 0, 0);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render()


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = dim[0],
          width = dim[1];
      var imageData = (new ImageData(height, width));
      return dl.tidy((() => {
      	
        return tensor.data().then(((d) => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData();
        
        }));
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = dim[0],
          width = dim[1];
      var imageData = (new ImageData(height, width));
      return tensor.data().then(((d) => {
      	
        return dl.tidy((() => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData(imageData);
        
        }));
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = dim[0],
          width = dim[1];
      var imageData = (new ImageData(height, width));
      return tensor.data().then(((d) => {
      	
        return dl.tidy((() => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData(imageData, 0, 0);
        
        }));
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 200, 200 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 200, 200 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)

ants.set([ 128, 128 ], 1)
ants.set([ 129, 129 ], 1)
ants.set([ 129, 128 ], 1)
ants.set([ 128, 128 ], 1)
ants.render(canvas)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 129 ], 1)

ants.render(canvas)
ants.set([ 128, 128 ], 1)
ants.set([ 129, 129 ], 1)
ants.set([ 129, 128 ], 1)
ants.set([ 128, 129 ], 1)
ants.render(canvas)
ants.set([ 128, 128 ], 1)
ants.set([ 129, 129 ], 1)
ants.set([ 129, 128 ], 1)
ants.set([ 128, 129 ], 1)
ants.render(canvas)
ants.set([ 129, 128 ], 0)
ants.set([ 128, 129 ], 0)
ants.set([ 129, 128 ], 0)
ants.set([ 128, 129 ], 0)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 129, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 129 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 129, 129 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 129, 128 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 129 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)

ants.set([ 255, 255 ], 1)
ants.render(canvas)
ants.set([ 0, 255 ], 1)
ants.render(canvas)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = shape[0],
          width = shape[1];
      var imageData = (new ImageData(height, width));
      return tensor.data().then(((d) => {
      	
        return dl.tidy((() => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData(imageData, 0, 0);
        
        }));
      
      }));
    
   }
 });

ants.render(canvas)
console.log(ants)
ants.set([ 0, 0 ], 1)
ants.render(canvas)
ants.set([ 255, 0 ], 1)
ants.render(canvas)
ants.set([ 128, 128 ], 0)
ants.set([ 128, 128 ], 0)
ants.set([ 129, 129 ], 0)
ants.set([ 129, 128 ], 0)
ants.set([ 128, 129 ], 0)
ants.set([ 255, 0 ], 1)
ants.render(canvas)
ants.set([ 255, 255 ], 1)
ants.render(canvas)
ants.set([ 128, 128 ], 1)
ants.render(canvas)
console.log(ants.render)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      var imageData = (new ImageData(height, width));
      return tensor.data().then(((d) => {
      	
        return dl.tidy((() => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData(imageData, 0, 0);
        
        }));
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)

ants.set([ 256, 128 ], 1)
ants.render(canvas)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 256, 256 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 0, 0 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      var imageData = (new ImageData(height, width));
      return tensor.data().then(((d) => {
      	
        return dl.tidy((() => {
        	
          for (var i = 0;i < (width * height);++(i))
          {
          var j = (i * 4),
              k = i;;
          var a = d[i];;
          imageData.data[j] = Math.round((color.r * a));
          imageData.data[(j + 1)] = Math.round((color.g * a));
          imageData.data[(j + 2)] = Math.round((color.b * a));
          imageData.data[(j + 3)] = Math.round((255 * a));
          }
          ;
          return ctx.putImageData(imageData, 0, 0);
        
        }));
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 65, 65 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 0, 65 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)

ants.set([ 0, 200 ], 0)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 200, 0 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 200, 0 ], 0)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      var imageData = (new ImageData(height, width));
      return tensor.data().then(((d) => {
      	
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)

console.log(ants.render)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[(x + y)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width, imageData);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width, imageData);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width, imageData);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width, imageData);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 1)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render(canvas)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width, imageData);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
console.log(ants.render)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        console.log("rendering", height, width, imageData);
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        ctx.putImageData(imageData, 0, 0);
        return this.render(canvas);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.zeros(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((255 * a));
        }
        ;
        ctx.putImageData(imageData, 0, 0);
        return this.render(canvas);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red).define("ants", { 
  update(  ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var filter = dl.randomUniform([ 3, 3, 1, 1 ]);
      return this.tensor.conv1d(filter, 1, 1);
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
setInterval((() => {
	
  ants.update();
  return ants.render(canvas);

}), 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = true;

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

var ants = create(Field)(red).define("ants", { 
  update(  ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var filter = dl.randomUniform([ 3, 3, 1 ]);
      return this.tensor.conv1d(filter, 1, 1);
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red).define("ants", { 
  update(  ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
      return this.tensor.conv2d(filter, 1, 1);
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var dim = [ 256, 256, 0, 0 ];


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var rgb = (function rgb$(r, g, b) {
  /* rgb eval.sibilant:1:0 */

  return { 
    r,
    g,
    b
   };
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var red = rgb(255, 0, 0);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = true;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var Field = Interface.define("Field", { 
  init( color = this.color,shape = dim,tensor = dl.ones(shape) ){ 
    
      this.color = color;this.shape = shape;this.tensor = tensor;
      return this;
    
   },
  set( [ x, y ],v ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)] = v;
      
      }));
    
   },
  get( [ x, y ] ){ 
    
      return this.tensor.data().then(((d) => {
      	
        return d[((y * this.shape[0]) + x)];
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red).define("ants", { 
  update(  ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
      return this.tensor.conv2d(filter, 1, 1);
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red).define("ants", { 
  update(  ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      console.log(this.tensor.shape);
      var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
      return this.tensor.conv2d(filter, 1, 1);
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var dim = [ 256, 256, 0, 0 ];


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red).define("ants", { 
  update(  ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      console.log(this.tensor.shape);
      var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
      return this.tensor.conv2d(filter, 1, 1);
    
   },
  render( canvas = this.canvas,shape = this.shape,color = this.color,tensor = this.tensor ){ 
    
      if( !(running__QUERY) ){ 
        return false;
       };
      var ctx = canvas.getContext("2d"),
          height = tensor.shape[0],
          width = tensor.shape[1];
      return tensor.data().then(((d) => {
      	
        var imageData = (new ImageData(height, width));
        for (var i = 0;i < (width * height);++(i))
        {
        var j = (i * 4),
            k = i;;
        var a = d[i];;
        imageData.data[j] = Math.round((color.r * a));
        imageData.data[(j + 1)] = Math.round((color.g * a));
        imageData.data[(j + 2)] = Math.round((color.b * a));
        imageData.data[(j + 3)] = Math.round((a / 255));
        }
        ;
        return ctx.putImageData(imageData, 0, 0);
      
      }));
    
   }
 });


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = false;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.update = (function ants$update$() {
  /* ants.update ../../shell-utils/electron-kit/node_modules/kit/inc/core/function-expressions.sibilant:30:8 */

  if( !(running__QUERY) ){ 
    return false;
   };
  console.log(this.tensor.shape);
  var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
  return this.tensor.conv2d(filter, 1, 1);
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render = (function ants$render$(canvas = this.canvas, shape = this.shape, color = this.color, tensor = this.tensor) {
  /* ants.render ../../shell-utils/electron-kit/node_modules/kit/inc/core/function-expressions.sibilant:30:8 */

  if( !(running__QUERY) ){ 
    return false;
   };
  var ctx = canvas.getContext("2d"),
      height = tensor.shape[0],
      width = tensor.shape[1];
  return tensor.data().then(((d) => {
  	
    var imageData = (new ImageData(height, width));
    for (var i = 0;i < (width * height);++(i))
    {
    var j = (i * 4),
        k = i;;
    var a = d[i];;
    imageData.data[j] = Math.round((color.r * a));
    imageData.data[(j + 1)] = Math.round((color.g * a));
    imageData.data[(j + 2)] = Math.round((color.b * a));
    imageData.data[(j + 3)] = Math.round((a / 255));
    }
    ;
    return ctx.putImageData(imageData, 0, 0);
  
  }));
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
setInterval((() => {
	
  ants.update();
  return ants.render(canvas);

}), 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = true;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = false;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var dim = [ 256, 256, 256, 256 ];


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var ants = create(Field)(red);


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.update = (function ants$update$() {
  /* ants.update ../../shell-utils/electron-kit/node_modules/kit/inc/core/function-expressions.sibilant:30:8 */

  if( !(running__QUERY) ){ 
    return false;
   };
  console.log(this.tensor.shape);
  var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
  return this.tensor.conv2d(filter, 1, 1);
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render = (function ants$render$(canvas = this.canvas, shape = this.shape, color = this.color, tensor = this.tensor) {
  /* ants.render ../../shell-utils/electron-kit/node_modules/kit/inc/core/function-expressions.sibilant:30:8 */

  if( !(running__QUERY) ){ 
    return false;
   };
  var ctx = canvas.getContext("2d"),
      height = tensor.shape[0],
      width = tensor.shape[1];
  return tensor.data().then(((d) => {
  	
    var imageData = (new ImageData(height, width));
    for (var i = 0;i < (width * height);++(i))
    {
    var j = (i * 4),
        k = i;;
    var a = d[i];;
    imageData.data[j] = Math.round((color.r * a));
    imageData.data[(j + 1)] = Math.round((color.g * a));
    imageData.data[(j + 2)] = Math.round((color.b * a));
    imageData.data[(j + 3)] = Math.round((a / 255));
    }
    ;
    return ctx.putImageData(imageData, 0, 0);
  
  }));
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = true;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = false;


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var dim = [ 256, 256, 256, 256 ];


var ants = create(Field)(red);

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)

(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.update = (function ants$update$() {
  /* ants.update ../../shell-utils/electron-kit/node_modules/kit/inc/core/function-expressions.sibilant:30:8 */

  if( !(running__QUERY) ){ 
    return false;
   };
  console.log(this.tensor.shape);
  var filter = dl.randomUniform([ 3, 3, 256, 256 ]);
  return this.tensor.conv2d(filter, 1, 1);
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.render = (function ants$render$(canvas = this.canvas, shape = this.shape, color = this.color, tensor = this.tensor) {
  /* ants.render ../../shell-utils/electron-kit/node_modules/kit/inc/core/function-expressions.sibilant:30:8 */

  if( !(running__QUERY) ){ 
    return false;
   };
  var ctx = canvas.getContext("2d"),
      height = tensor.shape[0],
      width = tensor.shape[1];
  return tensor.data().then(((d) => {
  	
    var imageData = (new ImageData(height, width));
    for (var i = 0;i < (width * height);++(i))
    {
    var j = (i * 4),
        k = i;;
    var a = d[i];;
    imageData.data[j] = Math.round((color.r * a));
    imageData.data[(j + 1)] = Math.round((color.g * a));
    imageData.data[(j + 2)] = Math.round((color.b * a));
    imageData.data[(j + 3)] = Math.round((a / 255));
    }
    ;
    return ctx.putImageData(imageData, 0, 0);
  
  }));
});


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
ants.set([ 128, 128 ], 0)


(function() {
  /* src/macros.sibilant:19:8 */

  var path = require("path");
  var p = "/",
      inc = "/home/aaron/devel/apps/ants/src/";
  return module.paths = module.paths.concat(inc.split(path.sep).map((function(el) {
    /* src/macros.sibilant:25:33 */
  
    var r = path.join(p, "node_modules");
    p = path.join(p, el);
    return r;
  })), [ path.join(inc, "node_modules") ]);
}).call(this)
var running__QUERY = true;

